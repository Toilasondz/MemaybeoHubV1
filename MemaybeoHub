--== LIBSUCK (ORION FORK) SCRIPT - CH·ªà CH·ª®C NƒÇNG COMBAT/VISUAL ==--

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Load the UI library (Libsuck/Orion)
local Library = loadstring(game:HttpGet('https://gist.githubusercontent.com/MjContiga1/5b9535166d60560ac884a871cb0dc418/raw/e7fdb16802d9486d8d04d3e41d3607d89e6b4a1b/Libsuck.lua'))()

--== BI·∫æN TR·∫†NG TH√ÅI CORE ==--
local AIMBOT_ENABLED = false
local ESP_ENABLED = false
local ESPLINE_ENABLED = false
local FOV_ENABLED = false
local TEAMCHECK_ENABLED = false
local TARGET_PART = "Head" 

--== FOV SETUP ==--
local fovCircle
do
    local success, circle = pcall(function() return Drawing.new("Circle") end)
    if success and circle then
        fovCircle = circle
        fovCircle.Visible = false
        fovCircle.Radius = 90
        fovCircle.Thickness = 2
        fovCircle.Color = Color3.fromRGB(255,255,255)
        fovCircle.Filled = false
    else
        fovCircle = nil
    end
end

--== ESP SETUP ==--
local ESPs = {}

local function createESP(plr)
    if not plr or plr == LocalPlayer then return end
    if ESPs[plr] then return end

    local successBox, box = pcall(function() return Drawing.new("Square") end)
    local successLine, line = pcall(function() return Drawing.new("Line") end)
    ESPs[plr] = {
        Box = successBox and box or nil,
        Line = successLine and line or nil
    }

    if ESPs[plr].Box then
        ESPs[plr].Box.Visible = false
        ESPs[plr].Box.Thickness = 1
        ESPs[plr].Box.Filled = false
    end
    if ESPs[plr].Line then
        ESPs[plr].Line.Visible = false
        ESPs[plr].Line.Thickness = 1
    end
end

for _, p in ipairs(Players:GetPlayers()) do
    createESP(p)
end
Players.PlayerAdded:Connect(createESP)
Players.PlayerRemoving:Connect(function(plr)
    local data = ESPs[plr]
    if data then
        if data.Box then pcall(function() data.Box:Remove() end) end
        if data.Line then pcall(function() data.Line:Remove() end) end
        ESPs[plr] = nil
    end
end)

--== CORE COMBAT FUNCTIONS ==--
local function isVisible(part)
    if not part then return false end
    local origin = Camera and Camera.CFrame.Position or Workspace.CurrentCamera.CFrame.Position
    local dir = (part.Position - origin)
    if dir.Magnitude == 0 then return true end
    local ray = Ray.new(origin, dir.Unit * math.clamp(dir.Magnitude, 1, 1000))
    local hit, hitPos = Workspace:FindPartOnRay(ray, LocalPlayer.Character, false, true) 
    return hit and hit:IsDescendantOf(part.Parent)
end

local function getClosestToFOV()
    if not AIMBOT_ENABLED then return nil end
    local closest, dist = nil, math.huge
    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild(TARGET_PART) then
            if TEAMCHECK_ENABLED and plr.Team and LocalPlayer.Team and plr.Team == LocalPlayer.Team then
                continue
            end
            local targetPart = plr.Character:FindFirstChild(TARGET_PART)
            if not targetPart then continue end
            
            local vec, onScreen = Camera:WorldToViewportPoint(targetPart.Position)
            if onScreen then
                local fovRadius = (fovCircle and FOV_ENABLED) and fovCircle.Radius or 90
                local mag = (Vector2.new(vec.X, vec.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                if mag < fovRadius and mag < dist then
                    if isVisible(targetPart) then
                        closest = targetPart
                        dist = mag
                    end
                end
            end
        end
    end
    return closest
end

--== X√ÇY D·ª∞NG GIAO DI·ªÜN LIBSUCK ==--

local window = Library:Window('HS Script - Combat Focus')

-- Tabs
local combatTab = window:Tab({"Combat/Visual", "rbxassetid://7734022041"}) 
local settingsTab = window:Tab({"Settings", "rbxassetid://7733673987"}) 

---
## üéØ Combat/Visual Controls

combatTab:Label("--- Aimbot Core Functions ---")

-- Toggle 1: AIMBOT
combatTab:Toggle('AIMBOT', AIMBOT_ENABLED, function(state)
    AIMBOT_ENABLED = state
    game.StarterGui:SetCore("SendNotification", { Title = "Aimbot"; Text = state and "Aimbot Enabled" or "Aimbot Disabled"; Duration = 2; })
end)

-- Toggle 2: TEAM CHECK
combatTab:Toggle('Team Check', TEAMCHECK_ENABLED, function(state)
    TEAMCHECK_ENABLED = state
end)

-- Dropdown Target Part
combatTab:Dropdown("Target Part", {"Head", "Torso", "HumanoidRootPart"}, function(selected)
    TARGET_PART = selected
    game.StarterGui:SetCore("SendNotification", { Title = "Aimbot"; Text = "Target set to: " .. selected; Duration = 1; })
end)

combatTab:Label("--- ESP & FOV Settings ---")

-- Toggle 3: ESP BOX
combatTab:Toggle('ESP Box', ESP_ENABLED, function(state)
    ESP_ENABLED = state
end)

-- Toggle 4: ESP LINES
combatTab:Toggle('ESP Lines', ESPLINE_ENABLED, function(state)
    ESPLINE_ENABLED = state
end)

-- Toggle 5: SHOW FOV
combatTab:Toggle('Show FOV Circle', FOV_ENABLED, function(state)
    FOV_ENABLED = state
    if fovCircle then fovCircle.Visible = state end
end)

-- Slider: FOV Radius
combatTab:Slider("FOV Radius", 90, 360, 90, function(value)
    if fovCircle then 
        fovCircle.Radius = value 
    end
end)

---
## ‚öôÔ∏è Settings

settingsTab:Label("Keybinds")

settingsTab:Keybind("Aimbot Toggle Key", Enum.KeyCode.E, function(key)
    print("Aimbot Keybind set to: " .. key.Name)
end)

settingsTab:Keybind("Toggle Menu Key", Enum.KeyCode.Insert, function(key)
    print("Menu Keybind set to: " .. key.Name)
end)

settingsTab:Button('Teleport to Center (Utility)', function()
    local Player = game.Players.LocalPlayer
    if Player and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        Player.Character.HumanoidRootPart.CFrame = CFrame.new(0, 50, 0) 
        game.StarterGui:SetCore("SendNotification", { Title = "Teleport"; Text = "Teleported to 0, 50, 0"; Duration = 3; })
    end
end)


---
## üèÉ Logic & Runtime

-- Input Began (Ph√≠m t·∫Øt Aimbot)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    -- Ph√≠m E: Toggle Aimbot
    if input.KeyCode == Enum.KeyCode.E then
        AIMBOT_ENABLED = not AIMBOT_ENABLED
        game.StarterGui:SetCore("SendNotification", {
            Title = "Aimbot Toggle";
            Text = AIMBOT_ENABLED and "Aimbot Enabled" or "Aimbot Disabled";
            Duration = 2;
        })
    end
end)

-- Character Added
LocalPlayer.CharacterAdded:Connect(function(char)
    task.wait(0.25)
    Camera = Workspace.CurrentCamera
    Mouse = LocalPlayer:GetMouse()
    PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
end)

-- RENDER LOOP (X·ª≠ l√Ω ESP/AIMBOT)
RunService.RenderStepped:Connect(function()
    
    -- FOV VISUAL
    if fovCircle then
        if FOV_ENABLED and Camera then
            fovCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
            fovCircle.Visible = true
        else
            fovCircle.Visible = false
        end
    end

    -- ESP VISUALS
    for plr, esp in pairs(ESPs) do
        if esp and plr and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") and Camera then
            local hrp = plr.Character.HumanoidRootPart
            local vec, onScreen = Camera:WorldToViewportPoint(hrp.Position)
            
            local teamCheck = TEAMCHECK_ENABLED and plr.Team and LocalPlayer.Team and plr.Team == LocalPlayer.Team
            local visualColor = teamCheck and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)

            if not ESP_ENABLED and not ESPLINE_ENABLED then
                 if esp.Box then esp.Box.Visible = false end
                 if esp.Line then esp.Line.Visible = false end
                 goto continue
            end

            -- ESP BOX
            if ESP_ENABLED and onScreen then
                local topVec = Camera:WorldToViewportPoint(hrp.Position + Vector3.new(0,3.5,0))
                local bottomVec = Camera:WorldToViewportPoint(hrp.Position - Vector3.new(0,3.5,0))
                local height = math.abs(topVec.Y - bottomVec.Y)
                if esp.Box then
                    esp.Box.Size = Vector2.new(height*0.6, height)
                    esp.Box.Position = Vector2.new(vec.X - esp.Box.Size.X/2, vec.Y - esp.Box.Size.Y/2)
                    esp.Box.Color = visualColor
                    esp.Box.Visible = true
                end
            else
                if esp.Box then esp.Box.Visible = false end
            end

            -- ESP LINES
            if ESPLINE_ENABLED and onScreen then
                if esp.Line then
                    esp.Line.From = Vector2.new(Camera.ViewportSize.X/2, 0)
                    esp.Line.To = Vector2.new(vec.X, vec.Y)
                    esp.Line.Color = visualColor
                    esp.Line.Visible = true
                end
            else
                if esp.Line then esp.Line.Visible = false end
            end
            ::continue::
        else
            if esp.Box then esp.Box.Visible = false end
            if esp.Line then esp.Line.Visible = false end
        end
    end

    -- AIMBOT LOGIC
    if AIMBOT_ENABLED and Camera then
        local target = getClosestToFOV()
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        end
    end
end)
