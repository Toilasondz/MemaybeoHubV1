--== SCRIPT KAVO UI T·ªêI GI·∫¢N & DI CHUY·ªÇN ƒê∆Ø·ª¢C ==--

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local CoreGui = game:GetService("CoreGui")

-- T·∫£i th∆∞ vi·ªán Kavo UI
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Minimalist UI Base", "Ocean") 

local KavoMainFrame = nil
local KavoMainGui = nil 

-- ----------------------------------------------------
-- A. LOGIC CƒÇN GI·ªÆA & T√åM FRAME KAVO 
-- ----------------------------------------------------

local function findKavoGui()
    -- T√¨m ScreenGui c·ªßa Kavo
    for _, gui in pairs(PlayerGui:GetChildren()) do
        if string.find(gui.Name, "Kavo_") and gui:IsA("ScreenGui") then
            return gui
        end
    end
    for _, gui in pairs(CoreGui:GetChildren()) do
        if string.find(gui.Name, "Kavo_") and gui:IsA("ScreenGui") then
            return gui
        end
    end
    return nil
end

local function processKavoFrame(kavoGui)
    local function findMainFrame(parent)
        for _, child in pairs(parent:GetChildren()) do
            -- T√¨m Frame ch√≠nh c·ªßa Kavo (Frame c√≥ th·ªÉ k√©o)
            if child:IsA("Frame") and (child.Name == "Main" or child.Active) then
                return child
            end
        end
        return nil
    end

    local frame = findMainFrame(kavoGui)
    
    if frame then
        -- K√çCH TH∆Ø·ªöC GI·∫¢ ƒê·ªäNH & CƒÇN GI·ªÆA BAN ƒê·∫¶U
        -- S·ª≠ d·ª•ng k√≠ch th∆∞·ªõc 400x250 pixels v√† cƒÉn gi·ªØa (0.5, -200, 0.5, -125)
        frame.Position = UDim2.new(0.5, -200, 0.5, -125) 
        -- frame.Active = true (M·∫∑c ƒë·ªãnh c·ªßa Kavo n√™n n√≥ c√≥ th·ªÉ di chuy·ªÉn)
        
        KavoMainFrame = frame
        KavoMainGui = kavoGui
        
        print("Kavo UI is now draggable and centered.")
        KavoMainFrame.Visible = false -- ·∫®n ban ƒë·∫ßu
    else
        print("Warning: Could not find Kavo Main Frame.")
    end
end

-- Ch·ªù Kavo UI kh·ªüi t·∫°o xong v√† x·ª≠ l√Ω
task.spawn(function()
    local kavoGui
    repeat
        kavoGui = findKavoGui()
        task.wait(0.1)
    until kavoGui ~= nil

    processKavoFrame(kavoGui)
end)


-- C·∫•u tr√∫c UI Kavo (S∆∞·ªùn, kh√¥ng ch·ª©c nƒÉng)
local MainTab = Window:NewTab("Main")
local MainSection = MainTab:NewSection("Empty Section")

MainSection:NewLabel("üéâ Ch√†o m·ª´ng! ƒê√¢y l√† giao di·ªán s∆∞·ªùn.")
MainSection:NewLabel("B·∫°n c√≥ th·ªÉ k√©o menu n√†y v√† b·∫Øt ƒë·∫ßu th√™m Toggle/Slider v√†o ƒë√¢y.")

-- ----------------------------------------------------
-- B. N√öT M·ªû/ƒê√ìNG H√åNH VU√îNG BO G√ìC (T√ôY CH·ªàNH)
-- ----------------------------------------------------

local ToggleButton = Instance.new("ScreenGui")
ToggleButton.Name = "CustomToggleButton"
ToggleButton.Parent = PlayerGui
ToggleButton.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local ButtonFrame = Instance.new("Frame")
ButtonFrame.Name = "ToggleFrame"
ButtonFrame.Parent = ToggleButton
ButtonFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45) 
ButtonFrame.BorderSizePixel = 0
ButtonFrame.Size = UDim2.new(0, 50, 0, 50) 
ButtonFrame.Position = UDim2.new(0.01, 0, 0.3, 0) -- V·ªã tr√≠ ban ƒë·∫ßu
ButtonFrame.Active = true 
ButtonFrame.Selectable = true

local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 6)
Corner.Parent = ButtonFrame

local ButtonLabel = Instance.new("TextLabel")
ButtonLabel.Name = "IconLabel"
ButtonLabel.Parent = ButtonFrame
ButtonLabel.BackgroundTransparency = 1
ButtonLabel.Size = UDim2.new(1, 0, 1, 0)
ButtonLabel.Text = "UI" 
ButtonLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonLabel.Font = Enum.Font.Code
ButtonLabel.TextSize = 18

-- Logic K√©o/Di chuy·ªÉn N√∫t Toggle
local dragging = false
local dragStart, startPos
local function startDrag(input)
    if not dragging and (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
        dragging = true
        dragStart = input.Position
        startPos = ButtonFrame.Position
    end
end
local function doDrag(input)
    if dragging then
        local delta = input.Position - dragStart
        ButtonFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end
local function stopDrag()
    dragging = false
end
ButtonFrame.InputBegan:Connect(startDrag)
UserInputService.InputChanged:Connect(doDrag)
UserInputService.InputEnded:Connect(stopDrag)

-- Logic Click N√∫t ƒë·ªÉ M·ªü/ƒê√≥ng Kavo UI
ButtonFrame.MouseButton1Click:Connect(function()
    if not KavoMainFrame then
        local kavoGui = findKavoGui()
        if kavoGui then
            processKavoFrame(kavoGui)
        end
    end
    
    if KavoMainFrame then
        KavoMainFrame.Visible = not KavoMainFrame.Visible
        ButtonLabel.TextColor3 = KavoMainFrame.Visible and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 255, 255)
    else
        game.StarterGui:SetCore("SendNotification", { Title = "L·ªói UI"; Text = "Kh√¥ng t√¨m th·∫•y Frame ch√≠nh c·ªßa Kavo."; Duration = 3; })
    end
end)
